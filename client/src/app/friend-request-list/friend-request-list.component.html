<div class="friend-requests-container">
  <h2>Friend Requests</h2>

  @if (errorMessage) {
    <div class="error-message">{{ errorMessage }}</div>
  }

  @if (isLoading) {
    <div class="loading">Loading...</div>
  }

  @if (!isLoading && friendRequests.length === 0) {
    <p>You have no pending friend requests</p>
  }

  @if (!isLoading && friendRequests.length > 0) {
    <div class="requests-grid">
      @for (request of friendRequests; track request.id) {
        <div
          class="request-card"
          [routerLink]="['/main-layout/profile', request.friendId]"
          style="cursor: pointer;"
          tabindex="0"
          role="button"
          (click)="$event.stopPropagation()"
        >
          <img
            class="avatar"
            [src]="request.profilePictureUrl ? baseUrl + request.profilePictureUrl : 'assets/images/default-avatar.png'"
            alt="{{ request.friendName }}"
          />
          <div class="info">
            <h3>{{ request.friendName }}</h3>
            <p>Sent From: {{ getTimeAgo(request.createdAt) }}</p>
          </div>
          <div class="actions" (click)="$event.stopPropagation()">
            <button (click)="respondToRequest(request.id, true)" class="accept">Accept</button>
            <button (click)="respondToRequest(request.id, false)" class="reject">Reject</button>
          </div>
        </div>
      }
    </div>
  }
</div>
